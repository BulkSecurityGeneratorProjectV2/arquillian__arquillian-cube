<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Arquillian Cube</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Arquillian Cube</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Documentation for version Alpha3 can be found here: <a href="https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha3/README.adoc" class="bare">https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha3/README.adoc</a></p>
</div>
<div class="paragraph">
<p>Documentation for version Alpha2 can be found here: <a href="https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha2/README.adoc" class="bare">https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha2/README.adoc</a></p>
</div>
<div class="paragraph">
<p>Documentation for version Alpha1 can be found here: <a href="https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha1/README.adoc" class="bare">https://github.com/arquillian/arquillian-cube/blob/1.0.0.Alpha1/README.adoc</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_this">What is this?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Arquillian Cube</strong> is an <em>Arquillian</em> extension that can be used to manager <em>Docker</em> containers from <em>Arquillian</em>.</p>
</div>
<div class="paragraph">
<p>Extension is named <strong>Cube</strong> for two reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Because Docker is like a cube</p>
</li>
<li>
<p>Because <a href="http://en.memory-alpha.org/wiki/Borg_cube">Borg starship</a> is named <strong>cube</strong> and well because we are moving tests close to production we can say that "any resistance is futile, bugs will be assimilated".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With this extension you can start a <em>Docker</em> container with a server installed, deploy the required deployable file within it and execute <em>Arquillian</em> tests.</p>
</div>
<div class="paragraph">
<p>The key point here is that if <em>Docker</em> is used as deployable platform in production, your tests are executed in a the same container as it will be in production, so your tests are even more real than before.</p>
</div>
<div class="paragraph">
<p>But it also lets you start a container with every required service like database, mail server, &#8230;&#8203; and instead of stubbing or using fake objects your tests can use real servers.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>This extension has been developed and tested on a Linux machine with the <em>Docker</em> server already installed.
It works with <strong>Boot2Docker</strong> as well in <em>Windows</em> and <em>MacOS</em> machines, but some parameters like <em>host ip</em> must be the <em>Boot2Docker</em> server instead of <em>localhost</em> (in case you have <em>Docker</em> server installed inside your own machine).</p>
</div>
<div class="paragraph">
<p>One of the best resources to learn about why using <em>Boot2Docker</em> is different from using <em>Docker</em> in Linux can be read here <a href="http://viget.com/extend/how-to-use-docker-on-os-x-the-missing-guide" class="bare">http://viget.com/extend/how-to-use-docker-on-os-x-the-missing-guide</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preliminaries">Preliminaries</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Arquillian Cube</strong> relies on <a href="https://github.com/docker-java/docker-java">docker-java</a> API.</p>
</div>
<div class="paragraph">
<p>To use <strong>Arquillian Cube</strong> you need a <em>Docker</em> daemon running on a computer (it can be local or not), but probably it will be at local.</p>
</div>
<div class="paragraph">
<p>By default the <em>Docker</em> server uses UNIX sockets for communicating with the <em>Docker</em> client. <strong>Arquillian Cube</strong> will attempt to detect the operating system it is running on and either set the <em>docker-java</em> to use UNIX socket on <em>Linux</em> or to <a href="#boot2docker">Boot2Docker</a> on <em>Windows</em>/<em>Mac</em> as the default URI.</p>
</div>
<div class="paragraph">
<p>If you want to use TCP/IP to connect to the Docker server, you&#8217;ll need to make sure that your <em>Docker</em> server is listening on TCP port.
To allow <em>Docker</em> server to use TCP add the following line to /etc/default/docker:</p>
</div>
<div class="paragraph">
<p>DOCKER_OPTS="-H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock"</p>
</div>
<div class="paragraph">
<p>After restarting the <em>Docker</em> daemon you need to make sure that <em>Docker</em> is up and listening on TCP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ docker -H tcp://127.0.0.1:2375 version

Client version: 0.8.0
Go version (client): go1.2
Git commit (client): cc3a8c8
Server version: 1.2.0
Git commit (server): fa7b24f
Go version (server): go1.3.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you cannot see the client and server versions then it means that something is wrong with the <em>Docker</em> installation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_example">Basic Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After having a <em>Docker</em> server installed we can start using <strong>Arquillian Cube</strong>.
In this case we are going to use a very simple example using a <em>Docker</em> image with <em>Apache Tomcat</em> and we are going to test a <em>Servlet</em> on it.</p>
</div>
<div class="listingblock">
<div class="title">HelloWorldServlet.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@WebServlet("/HelloWorld")
public class HelloWorldServlet extends HttpServlet {

  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    PrintWriter writer = resp.getWriter();
    writer.println("Hello World");
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">HelloWorldServletTest.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RunWith(Arquillian.class)
public class HelloWorldServletTest {

  @Deployment(testable=false) <b class="conum">(1)</b>
  public static WebArchive create() {
    return ShrinkWrap.create(WebArchive.class, "hello.war").addClass(HelloWorldServlet.class); <b class="conum">(2)</b>
  }

  @Test
  public void should_parse_and_load_configuration_file(@ArquillianResource URL resource) throws IOException { <b class="conum">(3)</b>

    URL obj = new URL(resource, "HelloWorld");
    HttpURLConnection con = (HttpURLConnection) obj.openConnection();
    con.setRequestMethod("GET");

    BufferedReader in = new BufferedReader(
            new InputStreamReader(con.getInputStream()));
    String inputLine;
    StringBuffer response = new StringBuffer();

    while ((inputLine = in.readLine()) != null) {
        response.append(inputLine);
    }
    in.close();

    assertThat(response.toString(), is("Hello World"));<b class="conum">(4)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>In this case we are running the test as a client. So in fact this test is executed against the container instead of inside the container.</p>
</li>
<li>
<p>No changes in this part, we need to create a deployable file, and because we are testing against <em>Tomcat</em>, a <em>war</em> file is created.</p>
</li>
<li>
<p>Because the test is run as client, we can use @ArquillianResource to get the URL where the file is deployed. Note that this will be the URL to access <em>Tomcat</em> running inside the <em>Docker</em> container.</p>
</li>
<li>
<p>Typical jUnit assertion of servlet response.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now this test could be run in any container, there is nothing that ties this to <em>Docker</em>.
Next step is adding some dependencies apart from the typical <em>Arquillian</em> dependencies.</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.arquillian.cube&lt;/groupId&gt;
  &lt;artifactId&gt;arquillian-cube-docker&lt;/artifactId&gt; <b class="conum">(1)</b>
  &lt;version&gt;${project.version}&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;
  &lt;artifactId&gt;arquillian-tomcat-remote-7&lt;/artifactId&gt; <b class="conum">(2)</b>
  &lt;version&gt;1.0.0.CR7&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Adds <strong>Arquillian Cube</strong> dependency.</p>
</li>
<li>
<p>From the point of view of <em>Arquillian</em>, <em>Tomcat</em> is being executed in a remote host (in fact this is true because <em>Tomcat</em> is running inside <em>Docker</em> which is external to <em>Arquillian</em>), so we need to add the remote adapter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And finally we need to configure <em>Tomcat</em> remote adapter and <strong>Arquillian Cube</strong> in arquillian.xml file.</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://jboss.org/schema/arquillian"
  xsi:schemaLocation="http://jboss.org/schema/arquillian
  http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;

  &lt;extension qualifier="docker"&gt; <b class="conum">(1)</b>
      &lt;property name="serverVersion"&gt;1.12&lt;/property&gt; <b class="conum">(2)</b>
      &lt;property name="serverUri"&gt;http://localhost:2375&lt;/property&gt; <b class="conum">(3)</b>
      &lt;property name="dockerContainers"&gt; <b class="conum">(4)</b>
          tomcat:
            image: tutum/tomcat:7.0
            exposedPorts: [8089/tcp]
            await:
              strategy: polling
            env: [TOMCAT_PASS=mypass, JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false]
            portBindings: [8089/tcp, 8080/tcp]
      &lt;/property&gt;
  &lt;/extension&gt;

  &lt;container qualifier="tomcat" default="true"&gt; <b class="conum">(5)</b>
      &lt;configuration&gt;
          &lt;property name="host"&gt;localhost&lt;/property&gt; <b class="conum">(6)</b>
          &lt;property name="httpPort"&gt;8080&lt;/property&gt; <b class="conum">(7)</b>
          &lt;property name="user"&gt;admin&lt;/property&gt; <b class="conum">(8)</b>
          &lt;property name="pass"&gt;mypass&lt;/property&gt;
      &lt;/configuration&gt;
  &lt;/container&gt;

&lt;/arquillian&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>Arquillian Cube</strong> extension is registered.</p>
</li>
<li>
<p><em>Docker</em> server version is required.</p>
</li>
<li>
<p><em>Docker</em> server URI is required. In case you are using a remote <em>Docker</em> host or <em>Boot2Docker</em> here you need to set the remote host ip, but in this case <em>Docker</em> server is on same machine.</p>
</li>
<li>
<p>A <em>Docker</em> container contains a lot of parameters that can be configured. To avoid having to create one XML property for each one, a YAML content can be embedded directly as property.</p>
</li>
<li>
<p>Configuration of <em>Tomcat</em> remote adapter. Cube will start the <em>Docker</em> container when it is ran in the same context as an <em>Arquillian</em> container with the same name.</p>
</li>
<li>
<p>Host can be <em>localhost</em> because there is a port forwarding between container and <em>Docker</em> server.</p>
</li>
<li>
<p>Port is exposed as well.</p>
</li>
<li>
<p>User and password are required to deploy the war file to remote <em>Tomcat</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And that&#8217;s all.
Now you can run your test and you will see how <em>tutum/tomcat:7.0</em> image is downloaded and started.
Ports 8080 (Tomcat standard port) and 8089(JMX port used by Arquillian) are exposed.
Finally in <em>env</em> section, environment variables are set. Read next link to understand why this is required <a href="https://docs.jboss.org/author/display/ARQ/Tomcat+7.0+-+Remote" class="bare">https://docs.jboss.org/author/display/ARQ/Tomcat+7.0+-+Remote</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Arquillian Cube</strong> requires some parameters to be configured, some related with <em>Docker</em> server and others related on the image that is being used.
Let&#8217;s see valid attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serverVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of REST API provided by_Docker_ server. You should check on the <em>Docker</em> site which version of REST API is shipped inside installed <em>Docker</em> service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serverUri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uri of <em>Docker</em> server. If the <em>Docker</em> server is running natively on Linux then this will be <em>localhost</em> but if you are using <em>Boot2Docker</em> or a remote <em>Docker</em> server then the URI should be changed to point to the <em>Docker</em> remote <em>URI</em>. It can be a unix socket URI as well in case you are running <em>Docker</em> in Linux (unix:///var/run/docker.sock).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dockerRegistry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the location of Docker registry. Default value is the official <em>Docker</em> registry located at <a href="https://registry.hub.docker.com" class="bare">https://registry.hub.docker.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dockerContainers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each <em>Docker</em> image (or container) can be configured with different parameters. This configuration is provided in YAML format. This property can be used to embed as YAML string value, all configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dockerContainersFile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instead of embedding YAML string, you can set YAML file location in this attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoStartContainers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cube will normally only start a <em>Docker</em> container when it has the same name as an active <em>Arquillian</em> container. That works for things that are <em>DeployableContainer</em>'s. For any other service, e.g. a database, you can use the <em>autoStartContainers</em> option to define which <em>Docker</em> containers to automatically start up. The option takes a comma separated list of <em>Docker</em> container ids. e.g. <em>tomcat7, mysql</em>. <strong>Arquillian Cube</strong> will attempt to start the containers in parallel if possible as well as start any linked containers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">certPath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path where certificates are stored. If you are not using <em>https</em> protocol this parameter is not required. This parameter accepts starting with ~ as home directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boot2dockerPath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the full location (and program name) of <em>boot2docker</em>. For example /opt/boot2dockerhome/boot2docker.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectionMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection Mode to bypass the Create/Start Cube commands if the a Docker Container with the same name is already running on the target system. This parameter can receive three possible values. <em>STARTANDSTOP</em> which is the default one if not set any and simply creates and stops all Docker Containers. If a container is already running, an exception is thrown. <em>STARTORCONNECT</em> mode tries to bypass the Create/Start Cube commands if a container with the same name is already running, and if it is the case doesn’t stop it at the end. But if container is not already running, Cube will start one and stop it at the end of the execution. And last mode is <em>STARTORCONNECTANDLEAVE</em> which is exactly the same of <em>STARTORCONNECT</em> but if container is started by Cube it won’t be stopped at the end of the execution so it can be reused in next executions.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the next example you can see a whole YAML document with configuration properties.
Keep in mind that almost all of them are configuration parameters provided by <em>Docker</em> remote API.
In this example we are going to explain the attributes that are most used and special cases.
Of course not all of them are mandatory:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In YAML adding brackets ("[" "]") is for setting a list.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat: #1
  image: tutum/tomcat:7.0 #2
  exposedPorts: [8089/tcp] #3
  await: #4
    strategy: polling #5
  workingDir: .
  disableNetwork: true
  hostName: host
  portSpecs: [80,81]
  user: alex
  tty: true
  stdinOpen: true
  stdinOnce: true
  memoryLimit: 1
  memorySwap: 1
  cpuShares: 1
  attachStdin: true
  attachStderr: true
  env: [TOMCAT_PASS=mypass, JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089] #6
  cmd: [] #7
  dns: [127.0.0.1]
  volumes: [/tmp]
  volumesFrom: [tomcat]
  binds:
    - /host:/container:ro
  links:
    - name:alias
    - name2:alias2
  portBindings: [8089/tcp, 8081-&gt;8080/tcp] #8
  privileged: true
  publishAllPorts: true
  networkMode: host
  dnsSearch: [127.0.0.1]
  devices:
    cGroupPermissions: a
    pathOnHost: b
    pathInContainer: c
  restartPolicy: #10
    name: failure
    maximumRetryCount: 1
  capAdd: [a]
  capDrop: [b]
  extends: container-id #9</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The name that are going to be assign to running container. It is <strong>mandatory</strong>.</p>
</li>
<li>
<p>The name of the image to be used. It is <strong>mandatory</strong>. If the image has not already been pulled by the <em>Docker</em> server, <strong>Arquillian Cube</strong> will pull it for you.</p>
</li>
<li>
<p>Sets exposed ports of the running container. It should follow the format <em>port number</em> slash(/) and _protocol (udp or tcp). Note that it is a list and it is not mandatory.</p>
</li>
<li>
<p>After a container is started, it starts booting up the defined services/commands. Depending on the nature of service, the lifecycle of these services are linked to start up or not. For example Tomcat, Wildlfy, TomEE and in general all Java servers must be started in foreground and this means that from the point of view of the client, the container never finishes to start. But on the other side other services like Redis are started in background and when the container is started you can be sure that Redis server is there. To avoid executing tests before the services are ready, you can set which await strategy should be used from <strong>Arquillian Cube</strong> side to accept that <em>Docker</em> container and all its defined services are up and ready. It is not mandatory and by default native strategy is used.</p>
</li>
<li>
<p>In strategy you set which strategy you want to follow. Currently three strategies are supported. <em>static</em>, <em>native</em> and <em>polling</em>.</p>
</li>
<li>
<p>You can pass environment variables by using <code>env</code>. In this section you can set special <code>dockerServerIp</code> string which at runtime will be replaced by <em>Cube</em> to current docker server ip.</p>
</li>
<li>
<p>After the container is up, a list of commands can be executed within it.</p>
</li>
<li>
<p>Port forwarding is configured using <code>portBinding</code> section. It contains a list of <code>exposedPort</code> and <code>port</code> separated by arrow (<em>&#8594;</em>). If only one port is provided, <strong>Arquillian Cube</strong> will expose the same port number. In this example the exposed port 8089 is mapped to 8089 and exposed port 8080 is mapped to 8081.</p>
</li>
<li>
<p>You can extend another configuration. Any top level element and it&#8217;s children from the target container-id will be copied over to this configuration, unless they have been defined here already.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As we seen in basic example the definition Arquillian Cube scenarios are described in <code>dockerContainers</code> property.
But if you want you can avoid using this property by simply creating a file called  <code>cube</code> at root of the classpath with same content.
<em>Arquillian Cube</em> will read it as it was defined in <code>arquilllian.xml</code> file.</p>
</div>
<div class="listingblock">
<div class="title">src/test/resources/cube</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat:
  image: tomcat:7.0
  exposedPorts: [8089/tcp]
  await:
    strategy: polling
  env: [TOMCAT_PASS=mypass, JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false]
  portBindings: [8089/tcp, 8080/tcp]</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_await">Await</h3>
<div class="paragraph">
<p>After a container is started, it starts booting up the defined services/commands.
Depending on the nature of service, the lifecycle of these services are linked to start up or not.
For example Tomcat, Wildlfy, TomEE and in general all Java servers must be started in foreground and this means that from the point of view of the <em>Docker</em> client, the container never finishes to start.
But on the other side other services like Redis are started in background and when the container is started you can be sure that Redis server is there.
To avoid executing tests before the services are ready, you can set which await strategy should be used from <strong>Arquillian Cube</strong> side to accept that <em>Docker</em> container and all its defined services are up and ready.</p>
</div>
<div class="paragraph">
<p>Currently next await strategies are supported:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">native</dt>
<dd>
<p>it uses <strong>wait</strong> command. In this case current thread is waiting until the <em>Docker</em> server notifies that has started. In case of foreground services this is not the approach to be used.</p>
</dd>
<dt class="hdlist1">polling</dt>
<dd>
<p>in this case a polling (with <em>ping</em> or <em>ss</em> command) is executed for 5 seconds against all exposed ports. When communication to all exposed ports is acknowledged, the container is considered to be up. This approach is the one to be used in case of services started in foreground. By default <em>polling</em> executes <em>ss</em> command inside the running container to know if the server is already running. You can use a <em>ping</em> from client by setting type attribute to ping; Note that <em>ping</em> only works if you are running <em>Docker</em> daemon on localhost. In almost all cases the default behaviour matches all scenarios.</p>
</dd>
<dt class="hdlist1">static</dt>
<dd>
<p>similar to <em>polling</em> but it uses the host ip and specified list of ports provided as configuration parameter. This can be used in case of using <em>Boot2Docker</em>.</p>
</dd>
<dt class="hdlist1">sleeping</dt>
<dd>
<p>sleeps current thread for the specified amount of time. You can specify the time in seconds or milliseconds.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>By default in case you don&#8217;t specify any <em>await</em> strategy, polling with <em>ss</em> command is used.</p>
</div>
<div class="listingblock">
<div class="title">Example native</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat:
  image: tutum/tomcat:7.0
  exposedPorts: [8089/tcp]
  await:
    strategy: native</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example polling using ss command by default</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat:
  image: tutum/tomcat:7.0
  exposedPorts: [8089/tcp]
  await:
    strategy: polling
    sleepPollingTime: 200 s #1
    iterations: 3 #2</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Optional parameter to configure sleeping time between poling. You can set in seconds using <em>s</em> or miliseconds using <em>ms</em>. By default time unit is miliseconds and value 500.</p>
</li>
<li>
<p>Optional parameter to configure number of retries to be done. By default 10 iterations are done.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Example static</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat:
  image: tutum/tomcat:7.0
  exposedPorts: [8089/tcp]
  await:
    strategy: static
    ip: localhost
    ports: [8080, 8089]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example sleeping</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat:
  image: tutum/tomcat:7.0
  exposedPorts: [8089/tcp]
  await:
    strategy: sleeping
    sleepTime: 200 s #1</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Optional parameter to configure sleeping time between poling. You can set in seconds using <em>s</em> or miliseconds using <em>ms</em>. By default time unit is miliseconds and value 500.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_inferring_exposedports_from_portbinding">Inferring exposedPorts from portBinding</h3>
<div class="paragraph">
<p>When you are using <em>Docker</em> you can set two different parameters, exposedPort and portBinding.
exposedPorts are ports that are available inside <em>Docker</em> infrastructure and they are used for communication between <em>Docker</em> containers but not from outside.
On the other side portBindings are a way to instruct <em>Docker</em> container to publish a port to be available from outside (for example from our test).</p>
</div>
<div class="paragraph">
<p>It seems reasonable that if you set a port binding this port should automatically be exposed port as well.
For this reason in <strong>Arquillian Cube</strong> you can use portBinding and it will automatically set to exposed port.</p>
</div>
<div class="paragraph">
<p>In next example we are only setting portBinding and <strong>Arquillian Cube</strong> will instruct <em>Docker</em> to expose port 8080 and of course bind the port 8080 so it can be accessible from outside.</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">daytime:
  buildImage:
    dockerfileLocation: src/test/resources/undertow
    noCache: true
    remove: true
  await:
    strategy: polling
  portBindings: [8080/tcp]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_allow_connecting_to_a_running_container">Allow connecting to a running container</h3>
<div class="paragraph">
<p>With the configuration option connectionMode you can bypass
the Create/Start Cube commands if the a <em>Docker</em> Container with the same name is already
running on the target system. If so, <strong>Arquillian Cube</strong> will reuse that Container moving forward.</p>
</div>
<div class="paragraph">
<p>This allows you to prestart the containers manually during development and just
connect to them to avoid the extra cost of starting the <em>Docker</em> Containers for each test
run. This assumes you are not changing the actual definition of the <em>Docker</em> Container itself.</p>
</div>
<div class="paragraph">
<p>An example of this configuration could be:</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;extension qualifier="docker"&gt;
  &lt;property name="serverVersion"&gt;1.12&lt;/property&gt;
  &lt;property name="serverUri"&gt;http://localhost:2375&lt;/property&gt;
  &lt;property name="connectionMode"&gt;STARTORCONNECT&lt;/property&gt;
  &lt;property name="dockerContainers"&gt;
      tomcat:
        #more properties
  &lt;/property&gt;
&lt;/extension&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>connectionMode is an attribute that can receive three parameters:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">STARTANDSTOP</dt>
<dd>
<p>it is the default one if not set any and simply creates and stops all <em>Docker</em> Containers. If a container is already running, an exception is thrown.</p>
</dd>
<dt class="hdlist1">STARTORCONNECT</dt>
<dd>
<p>it tries to bypass the Create/Start Cube commands if a container with the same name is already running, and if it is the case doesn’t stop it at the end. But if container is not already running, Cube will start one and stop it at the end of the execution.</p>
</dd>
<dt class="hdlist1">STARTORCONNECTANDLEAVE</dt>
<dd>
<p>it is exactly the same of <em>STARTORCONNECT</em> but if container is started by Cube it won’t be stopped at the end of the execution so it can be reused in next executions.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_before_stop_events">Before Stop Events</h3>
<div class="paragraph">
<p>Sometimes when the tests has finished and container is stopped you want to inspect some data like container console or getting a file from the container to manual inspecting.
In these cases you can configure each container to copy console log or copy a file/s from container to local machine just before container is stopped.</p>
</div>
<div class="paragraph">
<p>Next snippet shows how to copy a directory from container to local disk:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">tomcat_default:
  image: tutum/tomcat:7.0
  beforeStop: <b class="conum">(1)</b>
    - copy: <b class="conum">(2)</b>
        from: /test
        to: /tmp

    - log: <b class="conum">(3)</b>
        to: /tmp/container.log</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>beforeStop goes into the container section and may contain a list of copy and log elements.</p>
</li>
<li>
<p>copy is used to notify that we want to copy some directories or files form from container location to to local location.</p>
</li>
<li>
<p>log is used to notify that we want to copy container log to to local location.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In case of log command the standard output and the error output are returned.
log <em>Docker</em> command can receive some configuration paramters and you can set them too in configuration file.</p>
</div>
<div class="listingblock">
<div class="title">Example of log parameters</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">beforeStop:
  - log:
    to: /tmp/container.log
    follow: true
    stdout: true
    stderr: false
    timestamps: true
    tail: 10</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="automatic-resolution">Automatic serverUri resolution</h3>
<div class="paragraph">
<p>serverUri parameter is where you configure the Uri of <em>Docker</em> server.
This parameter is not mandatory and in case you don&#8217;t set it, <em>Arquillian Cube</em> will use next values:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unix:///var/run/docker.sock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://boot2docker:2376" class="bare">https://boot2docker:2376</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MacOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://boot2docker:2376" class="bare">https://boot2docker:2376</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="boot2docker">Boot2Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using <em>boot2docker</em> there are some parameters that depends on the installation of the <em>boot2docker</em>.
For example <em>boot2docker</em> ip is not <em>localhost</em> and may change every time you start a new <em>boot2docker</em> instance.
Also every time you start <em>boot2docker</em> copies required certificates to home directory of local machine.</p>
</div>
<div class="paragraph">
<p><em>Arquillian Cube</em> offers some automatic mechanisms to use <em>boot2docker</em> in <em>Cube</em>.</p>
</div>
<div class="paragraph">
<p>The first one is that serverUri parameter can contain the word boot2docker like for example https://boot2docker:2376.
When <em>Cube</em> is started it will check if the serverUri contains the <em>boot2docker</em> word, and if it is the case it will run the command boot2docker ip to get the ip and substitute the <em>boot2docker</em> sentence to the ip returned by that command.</p>
</div>
<div class="paragraph">
<p>Note that by default <em>Arquillian Cube</em> assumes that boot2docker command is on PATH, but you can configure its location by using boot2dockerPath which is the full location (and program name) of <em>boot2docker</em>.
For example /opt/boot2dockerhome/boot2docker.</p>
</div>
<div class="paragraph">
<p><em>boot2docker</em> runs in <em>https</em> and you need to set the certificates path.
These certificates are copied by <em>boot2docker</em> by default at &lt;HOME&gt;/.boot2docker/certs/boot2docker-vm.
If this propery is not set and the serverUri contains boot2docker, then this property is automatically configured to &lt;HOME&gt;/.boot2docker/certs/boot2docker-vm so you don&#8217;t need to worry to set for each environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_containers">Building containers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build a container <em>Docker</em> uses a file called Dockerfile <a href="http://docs.docker.com/reference/builder/" class="bare">http://docs.docker.com/reference/builder/</a>.
<strong>Arquillian Cube</strong> also supports building and running a container from a Dockerfile.</p>
</div>
<div class="paragraph">
<p>To set that <strong>Arquillian Cube</strong> must build the container, the image property must be changed to buildImage and add the location of Dockerfile.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see previous example but instead of creating a container from a predefined image, we are going to build one:</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">&lt;property name="dockerContainers"&gt;
  tomcat:
    buildImage: #1
      dockerfileLocation: src/test/resources-tomcat-7-dockerfile/tomcat #2
      noCache: true #3
      remove: true #4
    await:
      strategy: polling
    env: [JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false]
    portBindings: [8089/tcp, 8080/tcp]
&lt;/property&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>buildImage section is used in front of image. In case of both sections present in a document, image section has preference over buildImage.</p>
</li>
<li>
<p>dockerfileLocation contains the location of Dockerfile and all files required to build the container.</p>
</li>
<li>
<p>Property to enable or disable the no cache attribute.</p>
</li>
<li>
<p>Property to enable or disable the remove attribute.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
dockerfileLocation can be a directory that must contains Dockerfile in root directory, also a tar.gz file or a <em>URL</em> pointing to a tar.gz file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An example of Dockerfile is:</p>
</div>
<div class="listingblock">
<div class="title">src/test/resources-tomcat-7-dockerfile/tomcat/Dockerfile</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">FROM tutum/tomcat:7.0

ENV JAVA_OPTS -Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false
ADD tomcat-users.xml /tomcat/conf/ <b class="conum">(1)</b>
EXPOSE 8089
CMD ["/tomcat/bin/catalina.sh","run"]</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>tomcat-users.xml file is located at same directory as Dockerfile.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enrichers">Enrichers</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Arquillian Cube</strong> comes with a few enrichers.</p>
</div>
<div class="paragraph">
<p>One for injecting the CubeID(<em>containerId</em>) of the current container created for executing the test, one that injects the CubeController to call lifecycle methods on any cube and one that injects com.github.dockerjava.api.DockerClient instance used to communicate with <em>Docker</em> server.</p>
</div>
<div class="paragraph">
<p>DockerClient injection only work if the tests are run in client mode, that is by using @RunAsClient or by setting the testable property to false @Deployment(testable = false).</p>
</div>
<div class="paragraph">
<p>These can be injected using the @ArquillianResource annotation.</p>
</div>
<div class="paragraph">
<p>As examples:</p>
</div>
<div class="listingblock">
<div class="title">CubeIDResourceProvider.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ArquillianResource
CubeID containerId;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">CubeResourceProvider.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ArquillianResource
DockerClient dockerClient;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">CubeControllerProvider.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ArquillianResource
CubeController cubeController;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_auto_starting_cubes_outside_of_arquillian_containers">Auto starting Cubes outside of Arquillian Containers</h3>
<div class="paragraph">
<p>Probably any application you may write will need an application/servlet container but also other servers like database server or mail server.
Each one will be placed on one <em>Docker Container</em>.
So for example a full application may contain one <em>Docker Container</em> with an application server (for example <em>Wildfly</em>) and another container with a database (for example <em>H2</em>).</p>
</div>
<div class="paragraph">
<p><strong>Arquillian Cube</strong> can orchestrate these containers as well.</p>
</div>
<div class="paragraph">
<p>An example of orchestration can be:</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;property name="autoStartContainers"&gt;database&lt;/property&gt; <b class="conum">(1)</b>
&lt;property name="dockerContainers"&gt;
  wildfly_database:
    extends: wildfly
    links:
      - database:database #2
  database:
    image: zhilvis/h2-db
    exposedPorts: [81/tcp, 1521/tcp]
    await:
      strategy: polling
    portBindings: [1521/tcp, 8181-&gt;81/tcp]
  &lt;/property&gt;

&lt;container qualifier="wildfly_database"&gt;
  &lt;configuration&gt;
    &lt;property name="target"&gt;wildfly:8.1.0.Final:remote&lt;/property&gt;
    &lt;property name="managementPort"&gt;9991&lt;/property&gt;
    &lt;property name="username"&gt;admin&lt;/property&gt;
    &lt;property name="password"&gt;Admin#70365&lt;/property&gt;
  &lt;/configuration&gt;
&lt;/container&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This property is used to start containers before any test is executed. In this case <em>database</em> container.</p>
</li>
<li>
<p>We use <em>link</em> property to connect <em>Wildfly</em> container to <em>database</em> container.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this case when a test is started both containers are started and when both are ready to receive requests, the test will be executed.</p>
</div>
<div class="paragraph">
<p>And the database definition shall be:</p>
</div>
<div class="listingblock">
<div class="title">UserRepository.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@DataSourceDefinition(
  name = "java:app/TestDataSource",
  className = "org.h2.jdbcx.JdbcDataSource",
  url = "jdbc:h2:tcp://database:1521/opt/h2-data/test",
  user = "sa",
  password = "sa"
)
@Stateless
public class UserRepository {

    @PersistenceContext
    private EntityManager em;

    public void store(User user) {
        em.persist(user);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_auto_remapping">Auto-Remapping</h3>
<div class="paragraph">
<p><strong>Arquillian Cube</strong> can automatically configure default ports of container in case of port forwarding.</p>
</div>
<div class="paragraph">
<p>What <strong>Arquillian Cube</strong> does internally is remapping default <code>DeployableContainer</code> port values to the ones configured in <em>Docker Containers</em> configuration.</p>
</div>
<div class="paragraph">
<p>Suppose you have a <em>Docker Container</em> configuration like:</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;property name="dockerContainers"&gt;
    tomcat_default:
      image: tutum/tomcat:7.0
      exposedPorts: [8089/tcp]
      await:
        strategy: polling
      env: [TOMCAT_PASS=mypass, JAVA_OPTS=-Dcom.sun.management.jmxremote.port=8089 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false]
      portBindings: [8089/tcp, 8081-&gt;8080/tcp] #1
&lt;/property&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Note that the exposed port is the 8081.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Then in theory you should configure the remote <em>Tomcat</em> adapter to port 8081 on your <em>arquillian.xml</em> file.
But let&#8217;s say that you are using that remote adapter for a remote local machine <em>Tomcat</em> (outside <em>Docker</em>) too, and is configured to use 8080 port.</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;container qualifier="tomcat_default"&gt;
  configuration&gt;
    &lt;property name="host"&gt;localhost&lt;/property&gt;
    &lt;property name="user"&gt;admin&lt;/property&gt;
    &lt;property name="pass"&gt;mypass&lt;/property&gt;
  &lt;/configuration&gt;
&lt;/container&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which basically uses default port (8080) to connect to remote server.</p>
</div>
<div class="paragraph">
<p>In this case you don&#8217;t need to create a new <code>container</code> tag, <strong>Arquillian Cube</strong> is smart enough to change the default port value automatically; in case of <em>Tomcat</em> 8080 to 8081.
<strong>Arquillan Cube</strong> will apply autoremapping to all properties that contains <code>port</code> as a substring of the property, and will remap if it is necessary.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Automapping only works in case you want to change the default server port to a <em>Docker</em> port forwarded port.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dockerserverip_and_containers">DockerServerIp and Containers</h3>
<div class="paragraph">
<p>If you are using a remote docker server (not on <em>localhost</em>) or for example <em>boot2docker</em> you may want to set that ip to Arquillian remote adapter configuration so it can deploy the archive under test.
In these cases you can hardcode this ip to arquillian container adapter configuration or you can use the special tag dockerServerIp.
At runtime these tag will be replaced by <em>Arquillian Cube</em> to docker server ip configured in serverUri parameter.
This replacement only works in properties that contains the string host or address in property name.</p>
</div>
<div class="paragraph">
<p>So for example:</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;extension qualifier="docker"&gt;
        &lt;property name="serverUri"&gt;http://192.168.0.2:2756&lt;/property&gt; <b class="conum">(1)</b>
  ...
&lt;/extension&gt;
&lt;container qualifier="tomcat_default"&gt;
  configuration&gt;
    &lt;property name="host"&gt;dockerServerIp&lt;/property&gt; <b class="conum">(2)</b>
    &lt;property name="user"&gt;admin&lt;/property&gt;
    &lt;property name="pass"&gt;mypass&lt;/property&gt;
  &lt;/configuration&gt;
&lt;/container&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We set the serverUri as usually.</p>
</li>
<li>
<p>dockerServerIp is replaced at runtime.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The host property will be replaced automatically to 192.168.0.2.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This also works in case you set serverUri using boot2docker special word or by using the defaults. Read more about it <a href="#boot2docker">Boot2Docker section</a> and <a href="#automatic-resolution">Automatic serverUri resolution section</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case of using <em>unix</em> socket dockerServerUri is replaced to <em>localhost</em>.</p>
</div>
<div class="paragraph">
<p>Also <em>Arquillian Cube</em> can help you in another way inferring boot2docker ip.
In case you are running in <em>MACOS</em> or <em>Windows</em> with boot2docker, you may not need to set host property at all nor using dockerServerIp.
<em>Arquillian Cube</em> will inspect any property in configuration class that contains the word <em>address</em> or <em>host</em> that it is not overriden in <code>arquillian.xml</code> and it will set the boot2docker server automatically.</p>
</div>
<div class="paragraph">
<p>So previous example could be modified to:</p>
</div>
<div class="listingblock xml">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code>&lt;container qualifier="tomcat_default"&gt;
  configuration&gt;
    &lt;property name="user"&gt;admin&lt;/property&gt;
    &lt;property name="pass"&gt;mypass&lt;/property&gt;
  &lt;/configuration&gt;
&lt;/container&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in case you are running on <em>Windows</em> or <em>MacOS</em>, `host`property will be automatically set to the +boot2docker +<em>ip</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_containerless_server_and_docker">Containerless Server and Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In all previous sections we have seen that the application is deployed inside a container.
For example in case of <em>Tomcat</em> application, resources are deployed inside a <em>Servlet</em> container or for example in case of <em>Apache TomEE</em> you can deploy <em>EJBs</em> inside an <em>EJB</em> container.</p>
</div>
<div class="paragraph">
<p>But nowadays there other kind of applications that contains the container (if they have one) embedded inside them.
Typically these applications uses an embedded server and they are run as <em>CLI</em> applications.
Some examples can be <em>Spring Boot</em>, <em>Netty</em>, <em>SparkJava</em> or <em>Undertow</em>.</p>
</div>
<div class="paragraph">
<p>If you are using some of these technologies with <em>Docker</em>, you can still use <strong>Arquillian Cube</strong> to write your tests.</p>
</div>
<div class="sect2">
<h3 id="_java_embedded_servers">Java Embedded Servers</h3>
<div class="paragraph">
<p>Let&#8217;s suppose we are writing a service which should return as text the current day and time.
To serve this service to the world we decide to use <em>undertow</em> embedded server.</p>
</div>
<div class="paragraph">
<p>The code looks like:</p>
</div>
<div class="listingblock">
<div class="title">DaytimeServer.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import io.undertow.Undertow;
import io.undertow.server.HttpHandler;
import io.undertow.server.HttpServerExchange;
import io.undertow.util.Headers;

import java.text.SimpleDateFormat;
import java.util.Date;

public class DaytimeServer {

  public static void main(String[] args) { <b class="conum">(1)</b>

      Undertow server = Undertow.builder()
              .addHttpListener(8080, "0.0.0.0")
              .setHandler(new HttpHandler() {
                @Override
                public void handleRequest(final HttpServerExchange exchange) throws Exception {
                    SimpleDateFormat simpleDateFormat = new SimpleDateFormat();
                    exchange.getResponseHeaders().put(Headers.CONTENT_TYPE, "text/plain");
                    exchange.getResponseSender().send(simpleDateFormat.format(new Date()) + System.lineSeparator()); <b class="conum">(2)</b>
                }
            }).build();
       server.start();
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This class is a CLI application.</p>
</li>
<li>
<p>Returns a text with the day and time formatted with SimpleDateFormat.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See that this application is a CLI application which is pretty different from previous examples.
Previously the packaged application was deployed inside an application server, which in fact means that <strong>Arquillian</strong> connects to the server and tells it to deploy that file.</p>
</div>
<div class="paragraph">
<p>In this example there is no application server nor servlet server waiting for <strong>Arquillian</strong> to deploy an archive but the application is self-contained, it contains everything.
So in fact if you want to run the application probably you will end up by doing something like java -jar daytime.jar.</p>
</div>
<div class="paragraph">
<p>So how to write a test for these classes if we are using <em>Docker</em> as runtime container?</p>
</div>
<div class="paragraph">
<p>The first thing to do is add arquillian-cube-containerless dependency.</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.arquillian.cube&lt;/groupId&gt;
  &lt;artifactId&gt;arquillian-cube-containerless&lt;/artifactId&gt;
  &lt;version&gt;${arquillian.cube.version}&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next step is creating a Dockerfile.
This is required because we need to set not only the container image to be used but how to run the application.
But see that there is a problem on creating a Dockerfile in this case.
The jar name is not static because it will depend on the name you give during the creation of the archive (using <em>Shrinkwrap</em>).
So in fact Dockerfile should be templaterized.
And this is something that <strong>Arquillian Cube</strong> can do for you.
The idea is creating a file called DockerfileTemplate.</p>
</div>
<div class="listingblock">
<div class="title">src/test/resources/daytime/DockerfileTemplate</div>
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">FROM java:7

WORKDIR /usr/src/server
COPY ${deployableFilename} /usr/src/server/${deployableFilename} #1
EXPOSE 8080
CMD ["java", "-jar", "${deployableFilename}"]</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>${deployableFilname} will be replaced at runtime by the name of the jar file created by <em>Shrinkwrap</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Then we need to touch arquillian.xml file by setting an special container definition so <strong>Arquillian</strong> doesn&#8217;t crash because of trying to deploy the archive into a none defined container.</p>
</div>
<div class="listingblock">
<div class="title">src/test/resources/arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://jboss.org/schema/arquillian"
  xsi:schemaLocation="http://jboss.org/schema/arquillian
  http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;

  &lt;extension qualifier="docker"&gt;
    &lt;property name="serverVersion"&gt;1.12&lt;/property&gt;
    &lt;property name="serverUri"&gt;http://localhost:2375&lt;/property&gt;
    &lt;property name="dockerContainers"&gt; <b class="conum">(1)</b>
      daytime:
        buildImage: <b class="conum">(2)</b>
          dockerfileLocation: src/test/resources/undertow <b class="conum">(3)</b>
          noCache: true
          remove: true
        await:
          strategy: polling
        portBindings: [8080/tcp]
    &lt;/property&gt;
  &lt;/extension&gt;

  &lt;container qualifier="containerless" default="true"&gt; <b class="conum">(4)</b>
    &lt;configuration&gt;
        &lt;property name="containerlessDocker"&gt;daytime&lt;/property&gt; <b class="conum">(5)</b>
        &lt;property name="embeddedPort"&gt;8080&lt;/property&gt; <b class="conum">(6)</b>
    &lt;/configuration&gt;
  &lt;/container&gt;

&lt;/arquillian&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The Docker container is defined as per usual.</p>
</li>
<li>
<p>buildImage attribute is used to define the dockerfile location.</p>
</li>
<li>
<p>This attribute sets the directory where the Dockerfile is stored. In fact in this case it is the directory where DockerfileTemplate file is stored.</p>
</li>
<li>
<p>A container provided by <strong>Arquillian Cube</strong> must be defined.</p>
</li>
<li>
<p>This property is used to set which container must be started.</p>
</li>
<li>
<p>This property sets the exposed port by the embedded server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And finally the test:</p>
</div>
<div class="listingblock">
<div class="title">DaytimeTest.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RunWith(Arquillian.class)
public class DaytimeTest {

  private static final String LINE_SEPARATOR = System
          .getProperty("line.separator");

  @Deployment(testable = false) <b class="conum">(1)</b>
  public static JavaArchive createDeployment() {
      JavaArchive[] undertow = Maven.resolver().resolve("io.undertow:undertow-core:1.1.1.Final").withTransitivity().as(JavaArchive.class); <b class="conum">(2)</b>

      JavaArchive jar = ShrinkWrap
              .create(JavaArchive.class, "daytime.jar")
              .addClass(DaytimeServer.class); <b class="conum">(3)</b>

      for (JavaArchive javaArchive : undertow) { <b class="conum">(4)</b>
          jar.merge(javaArchive);
      }

      jar.addAsManifestResource(
              new StringAsset(
                      "Main-Class: org.arquillian.cube.impl.containerless.DaytimeServer"
                              + LINE_SEPARATOR), "MANIFEST.MF"); <b class="conum">(5)</b>
      return jar;
  }

  @Test
  public void shouldReturnDateFromDaytimeServer(@ArquillianResource URL base) { <b class="conum">(6)</b>
      try (
              BufferedReader in = new BufferedReader(new InputStreamReader(
                    base.openStream()));) {
          String userInput = in.readLine();
          assertThat(userInput, notNullValue());
      } catch (UnknownHostException e) {
          fail("Don't know about host ");
      } catch (IOException e) {
          fail("Couldn't get I/O for the connection to ");
      }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Tests should be run as-client.</p>
</li>
<li>
<p><em>ShrinkWrap</em> Maven resolver gets all dependencies for <em>Undertow</em>.</p>
</li>
<li>
<p>Create a jar file called daytime.jar with DaytimeServer class.</p>
</li>
<li>
<p>Undertow dependencies are merged inside jar.</p>
</li>
<li>
<p>Because it is a runnable jar, MANIFEST is created accordantly.</p>
</li>
<li>
<p>Simple test.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_polyglot_applications">Polyglot Applications</h3>
<div class="paragraph">
<p>In previous section we have seen that we can test any <em>java</em> <em>CLI</em> application that offers a socket connection.
But if you think clearly there is nothing that avoid <strong>Arquillian Cube</strong> to deploy applications developed in other languages like <em>Node.js</em>, <em>Play</em>, <em>Ruby on Rails</em>, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see an example on how you can use <strong>Arquillian Cube</strong> to test a <em>Node.js</em> <em>hello world</em> application.</p>
</div>
<div class="paragraph">
<p>First thing to do is create the <em>Node.js</em> application.</p>
</div>
<div class="listingblock">
<div class="title">src/main/js/package.json</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "name": "helloworld-server",
  "version": "0.0.1",
  "description": "A NodeJS webserver to run inside a docker container",
  "author": "asotobu@gmail.com",
  "license": "APLv2",
  "dependencies": {
      "express": "*"
  },
  "scripts": {"start": "node index.js"}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/js/index.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var express = require('express');

var app = express();

app.get('/', function(req, res){
  res.send('Hello from inside a container!');
});

app.listen(8080);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we need to define a DockerfileTemplate as we did for Undertow.</p>
</div>
<div class="listingblock">
<div class="title">src/test/resources/node/DockerfileTemplate</div>
<div class="content">
<pre class="highlight"><code>FROM node:0.11.14

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

ADD ${deployableFilename} /usr/src/app #1
RUN npm install
EXPOSE 8080

CMD [ "npm", "start" ]</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We need to use ADD command adding the deployed file instead of COPY. We are going to see why below.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally the arquillian.xml configuration file.</p>
</div>
<div class="listingblock">
<div class="title">arquillian.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://jboss.org/schema/arquillian"
  xsi:schemaLocation="http://jboss.org/schema/arquillian
  http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;

  &lt;extension qualifier="docker"&gt;
    &lt;property name="serverVersion"&gt;1.12&lt;/property&gt;
    &lt;property name="serverUri"&gt;http://localhost:2375&lt;/property&gt;
    &lt;property name="dockerContainers"&gt;
        node:
          buildImage:
            dockerfileLocation: src/test/resources/node
            noCache: true
            remove: true
          await:
            strategy: polling
          portBindings: [8080/tcp]
    &lt;/property&gt;
  &lt;/extension&gt;

  &lt;container qualifier="containerless" default="true"&gt;
    &lt;configuration&gt;
      &lt;property name="containerlessDocker"&gt;node&lt;/property&gt; <b class="conum">(1)</b>
      &lt;property name="embeddedPort"&gt;8080&lt;/property&gt;
    &lt;/configuration&gt;
  &lt;/container&gt;

&lt;/arquillian&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This property is used to set which container must be started. In this case node.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And finally the <strong>Arquillian</strong> test.</p>
</div>
<div class="listingblock">
<div class="title">NodeTest.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RunWith(Arquillian.class)
public class NodeTest {

  @Deployment(testable = false) <b class="conum">(1)</b>
  public static GenericArchive createDeployment() {
    return ShrinkWrap.create(GenericArchive.class, "app.tar") <b class="conum">(2)</b>
            .add(new ClassLoaderAsset("index.js"), "index.js")
            .add(new ClassLoaderAsset("package.json"), "package.json");
  }

  @Test
  public void shouldReturnMessageFromNodeJs(@ArquillianResource URL base) { <b class="conum">(3)</b>
    try (BufferedReader in = new BufferedReader(new InputStreamReader(
            base.openStream()));) {
        String userInput = in.readLine();
        assertThat(userInput, is("Hello from inside a container!"));
    } catch (UnknownHostException e) {
        fail("Don't know about host ");
    } catch (IOException e) {
        fail("Couldn't get I/O for the connection to ");
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Tests should be run as-client.</p>
</li>
<li>
<p>GenericArchive with tar extension must be created using <em>Shrinkwrap</em>.</p>
</li>
<li>
<p>Simple test.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
GenericArchive must end with tar extension because it is expected by <strong>Arquillian Cube</strong>. When you use ADD in Dockerfile, <em>Docker</em> will untar automatically the file to given location.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_future_work">Future work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>API will continuously evolve to fit requirements of an enterprise application as well as providing integration with <em>Kubernates</em> and other Docker related tools.
Also some configuration parameters will be modified to fix any possible requirements.
Although we are going to try to not break compatibility with previous versions, we cannot guarantee until <em>beta</em> stage.</p>
</div>
<div class="paragraph">
<p>Feel free to use it and any missing feature, bug or anything you see , feel free to add a new issue.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-17 16:53:42 CET
</div>
</div>
</body>
</html>